
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title></title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="robots" content="noindex, nofollow">
  <meta name="googlebot" content="noindex, nofollow">
  <meta name="viewport" content="width=device-width, initial-scale=1">
   <meta http-equiv="refresh" content="300">


  <script type="text/javascript" src="js/jquery-1.8.3.js"></script>

  <script type="text/javascript" src="js/jquery-3.3.1.js"></script>

  <script type="text/javascript" src="js/bootstrap.js"></script>

  <script type="text/javascript" src="js/hh.js"></script> 

  <link rel="stylesheet" type="text/css" href="css/main.css">
  <link rel="stylesheet" type="text/css" href="css/bootstrap.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"
   integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
   crossorigin=""/>


   <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"
   integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
   crossorigin=""></script> 
  


<script type="text/javascript">

 
  function days() {
   var d = new Date();
   var n = d.getDay();

   var now = new Date();
   var l = now.getDay();
   var today = new Date().getHours();

   var weekday=new Array(7);
       weekday[0]="sunday";
       weekday[1]="monday";
       weekday[2]="tuesday";
       weekday[3]="wednesday";
       weekday[4]="thursday";
       weekday[5]="friday";
       weekday[6]="saturday";
       


   var elements = document.getElementsByClassName(weekday[d.getDay()]);
    for(i=0; i<elements.length; i++) {
      elements[i].style.display =    'inline';


            if (today >=hh[i][l][1] && today <= hh[i][l][2]) {
               elements[i].style.color = 'blue';
               elements[i].style.fontSize='1.4em';
               elements[i].parentElement.style.backgroundColor='#adc5ed';
            } else {
              
            }

    }
}
</script>




<script>

</script>



</head>
<body onload="days()">
  <nav class="navbar navbar-default" role="navigation">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">HHAp For Collins</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <div class="">
          <ul class="nav navbar-nav">
            <li><a href="index.html">Table View</a></li>
            <li><a href="map.html">Map View</a></li>
          </ul>
          </div>
    </div><!-- /.navbar-collapse -->

  </div><!-- /.container-fluid -->
</nav>
<div class="container"><a href='#' id='geolocate' class='ui-button'>Find me</a><a href='map.html' id='' class='ui-button'>Refresh</a></div>
<div id="mapid" style="width: 100vw; height: 78vh;"></div>
<div class="footer">
  <p>Locations Currently Having Happy Hour   <img src="img/hh.png" alt="Key" width="20vw"></p>
</div>
<script>

  var LeafIcon = L.Icon.extend({
    options: {
        iconSize:     [25, 35],
        iconAnchor:   [30, 30],
        shadowAnchor: [4, 62],
        popupAnchor:  [-15, -36]
    }
});

var hhicon = new LeafIcon({iconUrl: 'img/hh.png'}),
    nothhicon = new LeafIcon({iconUrl: 'img/nothh.png'}),
    current = new LeafIcon({iconUrl: 'img/me.png'});

  var geolocate = document.getElementById('geolocate');

  var mymap = L.map('mapid').setView([51.505, -0.09], 13);

  L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiY2xvcmFuZ2UiLCJhIjoiY2pqNXF4enk0MGVmYTNxcWh0Yzk1aGltMSJ9.GBc2xdGQ_iRYlssBEkX0Aw', {
    maxZoom: 18,
    attribution: '',
    id: 'mapbox.streets'
  }).addTo(mymap);


 


  // Define pin colors to use
    var now = new Date();
    var d = now.getDay();
    var today = new Date().getHours();

    var icc = [nothhicon,nothhicon]; range = 2;



 for(i=0; i<range; i++) {

    if (today >=hh[i][d][1] && today <= hh[i][d][2]) {
       icc[i]=hhicon;
       } else {
       icc[i]=nothhicon;
       }
    }


  // Define gps locations
  var gps=[[51.5,-0.09],[51.45,-0.095]];
  
  // Define text for popups
  var pop=["group1","group2"]

  // Loop through variables and create pins
  for(i=0; i<gps.length; i++) {
     
  L.marker([gps[i][0], gps[i][1]],{icon: icc[i]}).addTo(mymap)
    .bindPopup(pop[i]);    

    }








// This uses the HTML5 geolocation API, which is available on
// most mobile browsers and modern browsers, but not in Internet Explorer
//
// See this chart of compatibility for details:
// http://caniuse.com/#feat=geolocation
  if (!navigator.geolocation) {
    geolocate.innerHTML = 'Geolocation is not available';
} else {
    geolocate.onclick = function (e) {
        e.preventDefault();
        e.stopPropagation();
        mymap.locate();
    };
}


// Once we've got a position, zoom and center the map
// on it, and add a single marker.
mymap.on('locationfound', function(e) {


    mymap.fitBounds(e.bounds);

    L.marker([e.latlng.lat, e.latlng.lng],{icon: current}).addTo(mymap)
    .bindPopup('Here I am!');   



 // And hide the geolocation button
    geolocate.parentNode.removeChild(geolocate);

});

// If the user chooses not to allow their location
// to be shared, display an error message.
mymap.on('locationerror', function() {
    geolocate.innerHTML = 'Position could not be found';
});

</script>




  
  <script>
    // tell the embed parent frame the height of the content
    if (window.parent && window.parent.parent){
      window.parent.parent.postMessage(["resultsFrame", {
        height: document.body.getBoundingClientRect().height,
        slug: "n3EmN"
      }], "*")
    }
  </script>
</body>
</html>
